type Arr = array[0..9] of integer;

var a: Arr;

/*

 ** [first, last) 中存在 value 则返回其下标

 ** 否则返回 last

 */

function bsearch(first: integer; last: integer; value: integer): integer;

var i: integer; /* 定义局部变量 */

ret: integer;

begin

ret := last;

while (first < last) do begin

i := first + (last - first) div 2;

if (a[i] = value) then begin

bsearch := i; /* 相当于 return */

end else if (a[i] < value) then begin

first := i + 1;

end else begin

last := i;

end;

end;

bsearch := ret;

end;

/* main() */

begin

a[0] := -3;

a[1] := -2;

a[2] := 0;

a[3] := 1;

a[4] := 1;

a[5] := 7;

a[6] := 8;

a[7] := 11;

a[8] := 22;

a[9] := 27;

write(bsearch(0, 10, 22)); /* 8 */

write(bsearch(0, 10, -1)); /* 10 */

end.
